<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Delma Clicker — Full Edition</title>
  <link rel="stylesheet" href="style.css?v=10">
</head>
<body>

  <!-- GÓRNY PRZYCISK -->
  <div id="top-area">
    <h1>Delma Clicker</h1>
    <h2>Punkty: <span id="points">0</span></h2>
    <button id="bigButton">Klikaj mnie!</button>
  </div>

  <!-- SKLEP PO PRAWEJ -->
  <section id="shop-area">
    <h2>Sklep</h2>

    <p>Siła kliknięcia: <span id="perClick">1</span></p>
    <button id="upgradeClickBtn">Ulepsz klik (+1)</button>
    <p>Koszt: <span id="upgradeClickCost">10</span></p>

    <hr>

    <p>Auto klików na sekundę: <span id="autoRate">0</span></p>
    <button id="autoClickBtn">Kup auto klik (+1/s)</button>
    <p>Koszt: <span id="autoClickCost">25</span></p>

    <hr>

    <p>Booster x2 na 10 sekund</p>
    <button id="boosterBtn">Kup booster</button>
    <p>Koszt: <span id="boosterCost">200</span></p>
  </section>

  <!-- REBIRTH W ROGU -->
  <section id="rebirth-area">
    <h2>Rebirth</h2>
    <p>Rebirthy: <span id="rebirths">0</span></p>
    <p>Mnożnik punktów: <span id="rebirthMultiplier">1</span>x</p>
    <p>Koszt rebirth: <span id="rebirthCost">5000</span></p>
    <button id="rebirthBtn">Zrób rebirth</button>
  </section>

  <!-- LICZNIK ODWIEDZIN -->
  <div id="visitorCounter">Odwiedzin: ładowanie...</div>

  <footer class="footer">
    <p>Made with ♥ dla zabawy. FULL EDITION</p>
  </footer>

<script>
window.addEventListener('DOMContentLoaded', () => {

  // ============================
  // LICZNIK ODWIEDZIN
  // ============================
  fetch('https://api.countapi.xyz/hit/danqqsb3-delma/visits')
    .then(res => res.json())
    .then(data => {
      document.getElementById('visitorCounter').textContent =
        'Odwiedzin: ' + data.value;
    });

  // ============================
  // GRA CLICKER
  // ============================

  const el = {
    points: document.getElementById('points'),
    bigButton: document.getElementById('bigButton'),

    perClick: document.getElementById('perClick'),
    autoRate: document.getElementById('autoRate'),

    upgradeClickBtn: document.getElementById('upgradeClickBtn'),
    autoClickBtn: document.getElementById('autoClickBtn'),
    boosterBtn: document.getElementById('boosterBtn'),

    upgradeClickCost: document.getElementById('upgradeClickCost'),
    autoClickCost: document.getElementById('autoClickCost'),
    boosterCost: document.getElementById('boosterCost'),

    rebirthBtn: document.getElementById('rebirthBtn'),
    rebirths: document.getElementById('rebirths'),
    rebirthMultiplier: document.getElementById('rebirthMultiplier'),
    rebirthCost: document.getElementById('rebirthCost'),
  };

  let points = 0;
  let perClick = 1;
  let autoRate = 0;

  let upgradeClickCost = 10;
  let autoClickCost = 25;
  let boosterCost = 200;

  let boosterActive = false;
  let boosterTime = 0;

  let rebirths = 0;
  let rebirthMultiplier = 1;
  let rebirthCost = 5000;

  function render() {
    el.points.textContent = Math.floor(points);
    el.perClick.textContent = perClick;
    el.autoRate.textContent = autoRate;

    el.upgradeClickCost.textContent = upgradeClickCost;
    el.autoClickCost.textContent = autoClickCost;
    el.boosterCost.textContent = boosterCost;

    el.rebirths.textContent = rebirths;
    el.rebirthMultiplier.textContent = rebirthMultiplier;
    el.rebirthCost.textContent = rebirthCost;
  }

  function handleClick() {
    let gain = perClick * rebirthMultiplier;
    if (boosterActive) gain *= 2;
    points += gain;
    render();
  }

  function buyClickUpgrade() {
    if (points < upgradeClickCost) return;
    points -= upgradeClickCost;
    perClick += 1;
    upgradeClickCost = Math.ceil(upgradeClickCost * 1.4);
    render();
  }

  function buyAutoClick() {
    if (points < autoClickCost) return;
    points -= autoClickCost;
    autoRate += 1;
    autoClickCost = Math.ceil(autoClickCost * 1.5);
    render();
  }

  function buyBooster() {
    if (points < boosterCost) return;
    points -= boosterCost;
    boosterActive = true;
    boosterTime = 100;
    boosterCost = Math.ceil(boosterCost * 1.8);
    render();
  }

  function doRebirth() {
    if (points < rebirthCost) return;

    points = 0;
    perClick = 1;
    autoRate = 0;

    upgradeClickCost = 10;
    autoClickCost = 25;
    boosterCost = 200;

    rebirths += 1;
    rebirthMultiplier = 1 + rebirths;
    rebirthCost = Math.ceil(rebirthCost * 2.5);

    render();
  }

  setInterval(() => {
    points += (autoRate * rebirthMultiplier) / 10;
    if (boosterActive) points += (autoRate * rebirthMultiplier) / 10;

    if (boosterActive) {
      boosterTime--;
      if (boosterTime <= 0) boosterActive = false;
    }

    render();
  }, 100);

  el.bigButton.addEventListener("click", handleClick);
  el.upgradeClickBtn.addEventListener("click", buyClickUpgrade);
  el.autoClickBtn.addEventListener("click", buyAutoClick);
  el.boosterBtn.addEventListener("click", buyBooster);
  el.rebirthBtn.addEventListener("click", doRebirth);

  render();
});
</script>

</body>
</html>
